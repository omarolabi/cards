<div class="card mb-2">
  <div class="card-body">
    <h6 class="card-subtitle mb-3 text-muted">Filtrar por:</h6>
    <form>
      <div class="form-row mb-1">
        <div class="col-4 text-right">
          <label for="seasonFilter"><small>Temporada:</small></label>
        </div>
        <div class="col">
          <select [(ngModel)]="filterValues.season" class="form-control form-control-sm" id="seasonFilter" (change)="setFilterValues($event.target.value, 'season')" [ngModelOptions]="{standalone: true}">
            <option [value]="initialFilterValue">Todas</option>
            <option [value]="season.name" *ngFor="let season of seasonsList$ | async">{{ season.name }}</option>
          </select>
        </div>
      </div>
    
      <div class="form-row mb-1">
        <div class="col-4 text-right">
          <label for="factionFilter"><small>Facción:</small></label>
        </div>
        <div class="col">
          <select [(ngModel)]="filterValues.faction" class="form-control form-control-sm" id="factionFilter" (change)="setFilterValues($event.target.value, 'faction')" [ngModelOptions]="{standalone: true}">
            <option [value]="initialFilterValue">Todas</option>
            <option [value]="faction.name" *ngFor="let faction of factionsList$ | async">{{ faction.name }}</option>
          </select>
        </div>
      </div>
    
      <div class="form-row mb-1">
        <div class="col-4 text-right">
          <label for="locationFilter"><small>Localización:</small></label>
        </div>
        <div class="col">
          <select [(ngModel)]="filterValues.location" class="form-control form-control-sm" id="locationFilter" (change)="setFilterValues($event.target.value, 'location')" [ngModelOptions]="{standalone: true}">
            <option [value]="initialFilterValue">Todas</option>
            <option [value]="location.name" *ngFor="let location of locationsList$ | async">{{ location.name }}</option>
          </select>
        </div>
      </div>
    </form>
  </div>
</div>

<table class="table table-striped table-sm">
  <thead class="thead-light">
    <tr>
      <th></th>
      <th>Nombre</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let card of filteredList | orderBy: 'number'">
      <td>
        <small class="badge badge-secondary">
          <span *ngIf="card.season === 'Shadespire'">Sh</span>
          <span *ngIf="card.season === 'Nightvault'">Nv</span>
          <span *ngIf="card.season === 'Líderes'">Ld</span>
          <span *ngIf="card.season === 'Global'">Global </span>
          <span *ngIf="card.season !== 'Global'"> {{ card.number }}</span>
        </small>
      </td>
      <td>
        <a class="" routerLink="/card/{{card.season}}{{card.number}}">{{ card.title }}</a>
      </td>
    </tr>
    <tr>
      <td colspan="2" *ngIf="isWorking">Cargando ...</td>
    </tr>
    <tr class="table-secondary" *ngIf="!isWorking">
      <td colspan="2" *ngIf="filteredList.length === 0">No hay cartas corregidas que mostrar</td>
    </tr>
  </tbody>
</table>
